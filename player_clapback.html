<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pemain - Clapback</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #2c3e50; color: white; text-align: center; padding: 15px; margin: 0; min-height: 100vh; }
        h2 { margin: 10px 0 5px 0; color: #f1c40f; text-transform: uppercase; letter-spacing: 1px; }
        p.subtitle { font-size: 0.9rem; color: #bdc3c7; margin-bottom: 20px; }
        .hand-container { display: flex; flex-direction: column; gap: 15px; padding-bottom: 50px; }
        .card-btn { background: white; color: #2c3e50; border: none; padding: 20px; border-radius: 15px; font-size: 0.95rem; font-weight: 600; text-align: left; cursor: pointer; border-left: 8px solid #3498db; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform 0.1s; width: 100%; box-sizing: border-box; line-height: 1.5; opacity: 0; animation: slideIn 0.5s forwards; }
        @keyframes slideIn { to { opacity: 1; transform: translateY(0); } from { opacity: 0; transform: translateY(10px); } }
        .card-btn:active { transform: scale(0.97); background: #ecf0f1; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(44, 62, 80, 0.98); z-index: 100; flex-direction: column; align-items: center; justify-content: center; }
        .btn-refresh { background: #f1c40f; color: #2c3e50; padding: 12px 30px; border: none; border-radius: 50px; font-weight: bold; font-size: 1rem; margin-top: 20px; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        #error-msg { color: #e74c3c; display: none; margin-top: 20px; font-weight: bold; border: 1px solid white; padding: 10px; }
    </style>
</head>
<body>

    <h2>Pilih Respon</h2>
    <p class="subtitle">Pilih 1 daripada <b>3 pilihan</b> di bawah.</p>

    <div class="hand-container" id="hand">
        <div style="color: #95a5a6;">Mengocok kad...</div>
    </div>
    
    <div id="error-msg"></div>

    <div class="overlay" id="waitScreen">
        <div style="font-size:4rem;">ðŸš€</div>
        <h3>Dihantar!</h3>
        <p>Tengok skrin depan.</p>
        <button class="btn-refresh" onclick="location.reload()">Dapat 3 Kad Baru</button>
    </div>

    <script>
        const scriptUrl = 'https://script.google.com/macros/s/AKfycbyLCwOpRhHsN1mcSuyNLmTw-G2mG_GagtRzCR7VXT1N-xuHHwbWolRGQ1GTzsbBaFuc/exec';

        // === SENARAI PENUH KAD (Universal) ===
        const allResponses = [
            // TERAPEUTIK (Menang)
            "Saya dengar keraguan awak tu, terima kasih sebab jujur dengan saya.",
            "Boleh kita 'pause' sekejap? Saya rasa ada benda penting di sebalik ayat awak tu.",
            "Saya perasan nada suara awak berubah bila cakap pasal ni.",
            "Nampak macam awak rasa tak selamat dalam sesi ni sekarang.",
            "Saya nak pastikan saya betul-betul faham maksud awak, boleh jelaskan lagi?",
            "Ayat awak tu bagi kesan pada saya, nampak macam awak tengah kecewa.",
            "Walaupun awak rasa begitu, saya masih kat sini nak cuba faham.",
            "Mari kita tengok apa sebenarnya yang buat awak rasa macam tu.",
            "Saya tak boleh janji atau setuju terus, tapi saya boleh dengar dulu.",
            "Saya hargai pandangan awak, tapi peranan saya kat sini berbeza sikit.",
            "Saya rasa ada jurang antara kita sekarang, jom kita baiki.",
            "Ayat tu berat, boleh kita bincang kenapa awak rasa perlu cakap macam tu?",
            "Saya tak nak lawan cakap awak, saya cuma nak faham perspektif awak.",
            "Jom kita fokus pada apa yang berlaku dalam bilik ni sekarang.",
            "Saya sedar awak mungkin rasa saya tak cukup bagus, dan itu okay untuk dibincangkan.",

            // EMPATI (Okay)
            "Saya dengar awak rasa kecewa/marah.",
            "Nampak gayanya benda ni sangat berat untuk awak.",
            "Terima kasih sebab bagitahu saya apa awak rasa.",
            "Saya faham, situasi ni memang susah.",
            "Boleh awak sambung lagi? Saya tengah dengar.",
            "Saya minta maaf kalau awak rasa macam tu.",
            "Perasaan awak tu valid.",
            "Ambil masa awak, tak perlu terburu-buru.",
            "Saya nampak awak tengah struggle sekarang.",
            "Kita cuba selesaikan sama-sama ya.",

            // DEFENSIF (Kalah)
            "Eh, awak jangan nak tuduh saya macam tu!",
            "Saya kaunselor bertauliah tau, hormat sikit.",
            "Kenapa awak degil sangat ni?",
            "Kalau tak suka cara saya, boleh cari orang lain.",
            "Saya tak buat salah pun, awak yang sensitif.",
            "Jangan nak ajar saya buat kerja.",
            "Awak ni memang susah nak dibantu la.",
            "Saya dah buat yang terbaik, awak yang tak hargai.",
            "Itu masalah awak, bukan masalah saya.",
            "Malas la saya nak layan kalau macam ni."
        ];

        function getRandomCards() {
            // Ambil 3 kad sahaja
            const shuffled = [...allResponses].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 3);
        }

        function renderHand() {
            const container = document.getElementById('hand');
            container.innerHTML = ''; 
            const myCards = getRandomCards();
            
            myCards.forEach((text, i) => {
                const btn = document.createElement('button');
                btn.className = 'card-btn';
                btn.innerText = text;
                btn.style.animationDelay = (i * 0.15) + 's';
                btn.onclick = () => submitCard(text);
                container.appendChild(btn);
            });
        }

        function submitCard(text) {
            document.getElementById('waitScreen').style.display = 'flex';
            fetch(scriptUrl + '?action=submit&text=' + encodeURIComponent(text), { 
                method: 'POST', mode: 'no-cors' 
            }).then(() => console.log("Sent")).catch(e => console.error(e));
        }

        window.onerror = function(msg) {
            document.getElementById('error-msg').style.display = 'block';
            document.getElementById('error-msg').innerText = "Ralat: " + msg;
        };

        renderHand();
    </script>
</body>
</html>
